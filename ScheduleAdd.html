<html>
<meta http-equiv="content-type" charset="utf-8">
<head>
<title>スケジュール追加</title>
</head>
<body>

<form>
日付<input type="text" id="date" size="20" maxlength="20"><br>
内容<input type="text" id="data" size="20" maxlength="20"><br>
背景色<input type="text" id="backcolor" size="20" maxlength="20"><br>
<input type="button" value="実行" onClick="Jikkou()">
<input type="button" value="戻る" onClick="Modoru()">

</form>

<span id="ErrMsg"></span>

<script type='text/javascript'>
	
	function Jikkou() {
		
		var Xhr = new XMLHttpRequest();
		
		Xhr.open( 'POST', 'ScheduleAdd.php' );
		Xhr.setRequestHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
		
		Xhr.send( 'date='      + document.getElementById('date'     ).value +
		         '&data='      + document.getElementById('data'     ).value +
		         '&backcolor=' + document.getElementById('backcolor').value );
		
		Xhr.onreadystatechange = function() {
			
			if ( Xhr.status === 200 ) { // 200:成功
				if ( Xhr.readyState === 4 ) { // 4:通信完了
					Modoru();
					// alert("完了");
					// return;
				}
			} else {
				document.getElementById('ErrMsg').innerHTML = 'readyState=' + Xhr.readyState + ' status=' + Xhr.status ;
			}
			
		}
		
	}
	
	function Modoru() {
		window.location.href = './';
	}
	
</script>
</body>
</html>

