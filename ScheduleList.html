<html>
<meta http-equiv="content-type" charset="utf-8">
<head>
<title>スケジュール一覧</title>
</head>
<body>

<input type="button" value="戻る" onClick="location.href='./'">
<input type="button" value="追加" onClick="location.href='ScheduleAdd.html'">

<span id="SdlLstID"></span>

<span id="ErrMsg"></span>

<script type='text/javascript'>
	
	var Xhr = new XMLHttpRequest();
	
	Xhr.open( 'POST', 'ScheduleList.php' );
	Xhr.setRequestHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
	
	Xhr.send();
	
	Xhr.onreadystatechange = function() {
		
		if ( Xhr.status === 200 ) { // 200:成功
			if ( Xhr.readyState === 4 ) { // 4:通信完了
				
				var SdlLstStr = '<table border="1">';
				
				SdlLstStr += '<tr>';
				SdlLstStr += '<th></th>'  ;
				SdlLstStr += '<th>日付</th>'  ;
				SdlLstStr += '<th>内容</th>'  ;
				SdlLstStr += '<th>背景色</th>';
				SdlLstStr += '<th><input type="button" value="削除" onClick="Sakujyo()"></th>'  ;
				SdlLstStr += '</tr>';
				
				for( Linedata_arr of JSON.parse( Xhr.responseText ) ) {
					
					SdlLstStr += '<tr>';
					SdlLstStr += '<th><input type="button" value="修正" onClick="Syuusei()"></th>'  ;
					SdlLstStr += '<td>' + Linedata_arr[0] + '</td>';
					SdlLstStr += '<td>' + Linedata_arr[1] + '</td>';
					SdlLstStr += '<td>' + Linedata_arr[2] + '</td>';
					SdlLstStr += '<th><input type="checkbox" name="delete"></th>'  ;
					SdlLstStr += '</tr>';
					
				}
				
				SdlLstStr += '</table>';
				
				document.getElementById('SdlLstID').innerHTML = SdlLstStr ;
				
			}
		} else {
			document.getElementById('ErrMsg').innerHTML = 'readyState=' + Xhr.readyState + ' status=' + Xhr.status ;
		}
		
	}
	
</script>

</body>
</html>

